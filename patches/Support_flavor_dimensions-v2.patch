diff --git a/AndResGuard-gradle-plugin/src/main/groovy/com/tencent/gradle/AndResGuardTask.groovy b/AndResGuard-gradle-plugin/src/main/groovy/com/tencent/gradle/AndResGuardTask.groovy
index 847525a..5d80c1b 100644
--- a/AndResGuard-gradle-plugin/src/main/groovy/com/tencent/gradle/AndResGuardTask.groovy
+++ b/AndResGuard-gradle-plugin/src/main/groovy/com/tencent/gradle/AndResGuardTask.groovy
@@ -33,10 +33,9 @@ class AndResGuardTask extends DefaultTask {
     android.applicationVariants.all { variant ->
       variant.outputs.each { output ->
         // remove "resguard"
-        String variantName = this.name["resguard".length()..-1]
-        if (variantName.equalsIgnoreCase(variant.buildType.name as String) || isTargetFlavor(variantName,
-            variant.productFlavors, variant.buildType.name) ||
-            variantName.equalsIgnoreCase(AndResGuardPlugin.USE_APK_TASK_NAME)) {
+        String taskVariantName = this.name["resguard".length()..-1]
+        if (taskVariantName.equalsIgnoreCase(variant.buildType.name as String) || isTargetFlavor(taskVariantName, variant) ||
+                taskVariantName.equalsIgnoreCase(AndResGuardPlugin.USE_APK_TASK_NAME)) {
 
           def outputFile = null
           try {
@@ -66,7 +65,7 @@ class AndResGuardTask extends DefaultTask {
               applicationId,
               variant.buildType.name,
               variant.productFlavors,
-              variantName,
+              taskVariantName,
               variant.mergedFlavor.minSdkVersion.apiLevel,
               variant.mergedFlavor.targetSdkVersion.apiLevel,
           )
@@ -79,11 +78,16 @@ class AndResGuardTask extends DefaultTask {
   }
 
   static isTargetFlavor(variantName, flavors, buildType) {
-    if (flavors.size() > 0) {
-      String flavor = flavors.get(0).name
-      return variantName.equalsIgnoreCase(flavor) || variantName.equalsIgnoreCase([flavors.collect { it.name }.join(""), buildType].join(""))
-    }
-    return false
+  static isTargetFlavor(taskVariantName, variant) {
+    def isTarget = true
+    def variantName = variant.name.capitalize()
+    String[] taskVariantNames = taskVariantName.split("(?=\\p{Upper})")
+
+    taskVariantNames.each { name ->
+      if (!variantName.contains(name)) {
+        isTarget = false
+      }
+    return isTarget
   }
 
   static useFolder(file) {
@@ -184,4 +188,4 @@ class AndResGuardTask extends DefaultTask {
     InputParam inputParam = builder.create()
     Main.gradleRun(inputParam)
   }
-}
\ No newline at end of file
+}
