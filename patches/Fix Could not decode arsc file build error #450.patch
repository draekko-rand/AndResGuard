From 769b541f240e75307a6cd1d6a63eedd574aa4c3b Mon Sep 17 00:00:00 2001
From: linsir <linsir678@gmail.com>
Date: Sat, 12 Nov 2022 18:42:51 +0800
Subject: [PATCH] [fix] fix Could not decode arsc file build error (#450)

---
 .../com/tencent/mm/androlib/res/decoder/ARSCDecoder.java    | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/AndResGuard-core/src/main/java/com/tencent/mm/androlib/res/decoder/ARSCDecoder.java b/AndResGuard-core/src/main/java/com/tencent/mm/androlib/res/decoder/ARSCDecoder.java
index 97a969c4..43ffcc21 100644
--- a/AndResGuard-core/src/main/java/com/tencent/mm/androlib/res/decoder/ARSCDecoder.java
+++ b/AndResGuard-core/src/main/java/com/tencent/mm/androlib/res/decoder/ARSCDecoder.java
@@ -360,6 +360,9 @@ private ResPackage readPackage() throws IOException, AndrolibException {
     while (mHeader.type == Header.TYPE_SPEC_TYPE) {
       readTableTypeSpec();
     }
+    while (mHeader.type == Header.TYPE_LIBRARY) {
+      readLibraryType();
+    }
     return mPkg;
   }
 
@@ -398,6 +401,9 @@ private void writePackage() throws IOException, AndrolibException {
     while (mHeader.type == Header.TYPE_SPEC_TYPE) {
       writeTableTypeSpec();
     }
+    while (mHeader.type == Header.TYPE_LIBRARY) {
+      writeLibraryType();
+    }
   }
 
   /**
